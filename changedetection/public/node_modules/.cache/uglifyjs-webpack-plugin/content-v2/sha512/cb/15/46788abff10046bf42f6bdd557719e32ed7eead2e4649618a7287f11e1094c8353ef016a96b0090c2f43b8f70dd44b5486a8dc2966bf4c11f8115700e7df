{"code":"define([\"leaflet\",\"React\",\"ReactDOM\"],function(t,e,n){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=7)}([function(t,e,n){\"use strict\";t.exports=n(10)},function(t,e,n){t.exports=n(8)()},function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e){t.exports=n},function(t,e,n){t.exports=n(13)()},function(t,e){t.exports={gettext:window.gettext,_:window.gettext,interpolate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return window.interpolate(t,e,!0)},get_format:function(t){return window.get_format(t)}}},function(t,e,n){t.exports=n(15)},function(t,e,n){\"use strict\";var o=n(9);function r(){}function i(){}i.resetWarningCache=r,t.exports=function(){function t(t,e,n,r,i,a){if(a!==o){var l=new Error(\"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types\");throw l.name=\"Invariant Violation\",l}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:r};return n.PropTypes=n,n}},function(t,e,n){\"use strict\";t.exports=\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\"},function(t,e,n){\"use strict\";\n/** @license React v16.14.0\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var o=n(11),r=\"function\"==typeof Symbol&&Symbol.for,i=r?Symbol.for(\"react.element\"):60103,a=r?Symbol.for(\"react.portal\"):60106,l=r?Symbol.for(\"react.fragment\"):60107,s=r?Symbol.for(\"react.strict_mode\"):60108,c=r?Symbol.for(\"react.profiler\"):60114,p=r?Symbol.for(\"react.provider\"):60109,u=r?Symbol.for(\"react.context\"):60110,f=r?Symbol.for(\"react.forward_ref\"):60112,d=r?Symbol.for(\"react.suspense\"):60113,h=r?Symbol.for(\"react.memo\"):60115,m=r?Symbol.for(\"react.lazy\"):60116,b=\"function\"==typeof Symbol&&Symbol.iterator;function y(t){for(var e=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+t,n=1;n<arguments.length;n++)e+=\"&args[]=\"+encodeURIComponent(arguments[n]);return\"Minified React error #\"+t+\"; visit \"+e+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function _(t,e,n){this.props=t,this.context=e,this.refs=v,this.updater=n||g}function w(){}function E(t,e,n){this.props=t,this.context=e,this.refs=v,this.updater=n||g}_.prototype.isReactComponent={},_.prototype.setState=function(t,e){if(\"object\"!=typeof t&&\"function\"!=typeof t&&null!=t)throw Error(y(85));this.updater.enqueueSetState(this,t,e,\"setState\")},_.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,\"forceUpdate\")},w.prototype=_.prototype;var O=E.prototype=new w;O.constructor=E,o(O,_.prototype),O.isPureReactComponent=!0;var S={current:null},x=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function k(t,e,n){var o,r={},a=null,l=null;if(null!=e)for(o in void 0!==e.ref&&(l=e.ref),void 0!==e.key&&(a=\"\"+e.key),e)x.call(e,o)&&!T.hasOwnProperty(o)&&(r[o]=e[o]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var c=Array(s),p=0;p<s;p++)c[p]=arguments[p+2];r.children=c}if(t&&t.defaultProps)for(o in s=t.defaultProps)void 0===r[o]&&(r[o]=s[o]);return{$$typeof:i,type:t,key:a,ref:l,props:r,_owner:S.current}}function L(t){return\"object\"==typeof t&&null!==t&&t.$$typeof===i}var C=/\\/+/g,P=[];function R(t,e,n,o){if(P.length){var r=P.pop();return r.result=t,r.keyPrefix=e,r.func=n,r.context=o,r.count=0,r}return{result:t,keyPrefix:e,func:n,context:o,count:0}}function j(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>P.length&&P.push(t)}function A(t,e,n){return null==t?0:function t(e,n,o,r){var l=typeof e;\"undefined\"!==l&&\"boolean\"!==l||(e=null);var s=!1;if(null===e)s=!0;else switch(l){case\"string\":case\"number\":s=!0;break;case\"object\":switch(e.$$typeof){case i:case a:s=!0}}if(s)return o(r,e,\"\"===n?\".\"+N(e,0):n),1;if(s=0,n=\"\"===n?\".\":n+\":\",Array.isArray(e))for(var c=0;c<e.length;c++){var p=n+N(l=e[c],c);s+=t(l,p,o,r)}else if(p=null===e||\"object\"!=typeof e?null:\"function\"==typeof(p=b&&e[b]||e[\"@@iterator\"])?p:null,\"function\"==typeof p)for(e=p.call(e),c=0;!(l=e.next()).done;)s+=t(l=l.value,p=n+N(l,c++),o,r);else if(\"object\"===l)throw o=\"\"+e,Error(y(31,\"[object Object]\"===o?\"object with keys {\"+Object.keys(e).join(\", \")+\"}\":o,\"\"));return s}(t,\"\",e,n)}function N(t,e){return\"object\"==typeof t&&null!==t&&null!=t.key?function(t){var e={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+(\"\"+t).replace(/[=:]/g,function(t){return e[t]})}(t.key):e.toString(36)}function I(t,e){t.func.call(t.context,e,t.count++)}function B(t,e,n){var o=t.result,r=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?M(t,o,n,function(t){return t}):null!=t&&(L(t)&&(t=function(t,e){return{$$typeof:i,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,r+(!t.key||e&&e.key===t.key?\"\":(\"\"+t.key).replace(C,\"$&/\")+\"/\")+n)),o.push(t))}function M(t,e,n,o,r){var i=\"\";null!=n&&(i=(\"\"+n).replace(C,\"$&/\")+\"/\"),A(t,B,e=R(e,i,o,r)),j(e)}var D={current:null};function H(){var t=D.current;if(null===t)throw Error(y(321));return t}var U={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:S,IsSomeRendererActing:{current:!1},assign:o};e.Children={map:function(t,e,n){if(null==t)return t;var o=[];return M(t,o,null,e,n),o},forEach:function(t,e,n){if(null==t)return t;A(t,I,e=R(null,null,e,n)),j(e)},count:function(t){return A(t,function(){return null},null)},toArray:function(t){var e=[];return M(t,e,null,function(t){return t}),e},only:function(t){if(!L(t))throw Error(y(143));return t}},e.Component=_,e.Fragment=l,e.Profiler=c,e.PureComponent=E,e.StrictMode=s,e.Suspense=d,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error(y(267,t));var r=o({},t.props),a=t.key,l=t.ref,s=t._owner;if(null!=e){if(void 0!==e.ref&&(l=e.ref,s=S.current),void 0!==e.key&&(a=\"\"+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(p in e)x.call(e,p)&&!T.hasOwnProperty(p)&&(r[p]=void 0===e[p]&&void 0!==c?c[p]:e[p])}var p=arguments.length-2;if(1===p)r.children=n;else if(1<p){c=Array(p);for(var u=0;u<p;u++)c[u]=arguments[u+2];r.children=c}return{$$typeof:i,type:t.type,key:a,ref:l,props:r,_owner:s}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:u,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:p,_context:t},t.Consumer=t},e.createElement=k,e.createFactory=function(t){var e=k.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:f,render:t}},e.isValidElement=L,e.lazy=function(t){return{$$typeof:m,_ctor:t,_status:-1,_result:null}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return H().useCallback(t,e)},e.useContext=function(t,e){return H().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return H().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return H().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return H().useLayoutEffect(t,e)},e.useMemo=function(t,e){return H().useMemo(t,e)},e.useReducer=function(t,e,n){return H().useReducer(t,e,n)},e.useRef=function(t){return H().useRef(t)},e.useState=function(t){return H().useState(t)},e.version=\"16.14.0\"},function(t,e,n){\"use strict\";\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/var o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String(\"abc\");if(t[5]=\"de\",\"5\"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e[\"_\"+String.fromCharCode(n)]=n;if(\"0123456789\"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(\"\"))return!1;var o={};return\"abcdefghijklmnopqrst\".split(\"\").forEach(function(t){o[t]=t}),\"abcdefghijklmnopqrst\"===Object.keys(Object.assign({},o)).join(\"\")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,a,l=function(t){if(null===t||void 0===t)throw new TypeError(\"Object.assign cannot be called with null or undefined\");return Object(t)}(t),s=1;s<arguments.length;s++){for(var c in n=Object(arguments[s]))r.call(n,c)&&(l[c]=n[c]);if(o){a=o(n);for(var p=0;p<a.length;p++)i.call(n,a[p])&&(l[a[p]]=n[a[p]])}}return l}},function(t,e){!function(){\"use strict\";function t(e){return this instanceof t?(this._canvas=e=\"string\"==typeof e?document.getElementById(e):e,this._ctx=e.getContext(\"2d\"),this._width=e.width,this._height=e.height,this._max=1,void this.clear()):new t(e)}t.prototype={defaultRadius:25,defaultGradient:{.4:\"blue\",.6:\"cyan\",.7:\"lime\",.8:\"yellow\",1:\"red\"},data:function(t,e){return this._data=t,this},max:function(t){return this._max=t,this},add:function(t){return this._data.push(t),this},clear:function(){return this._data=[],this},radius:function(t,e){e=e||15;var n=this._circle=document.createElement(\"canvas\"),o=n.getContext(\"2d\"),r=this._r=t+e;return n.width=n.height=2*r,o.shadowOffsetX=o.shadowOffsetY=200,o.shadowBlur=e,o.shadowColor=\"black\",o.beginPath(),o.arc(r-200,r-200,t,0,2*Math.PI,!0),o.closePath(),o.fill(),this},gradient:function(t){var e=document.createElement(\"canvas\"),n=e.getContext(\"2d\"),o=n.createLinearGradient(0,0,0,256);for(var r in e.width=1,e.height=256,t)o.addColorStop(r,t[r]);return n.fillStyle=o,n.fillRect(0,0,1,256),this._grad=n.getImageData(0,0,1,256).data,this},draw:function(t){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var e=this._ctx;e.clearRect(0,0,this._width,this._height);for(var n,o=0,r=this._data.length;r>o;o++)n=this._data[o],e.globalAlpha=Math.max(n[2]/this._max,t||.05),e.drawImage(this._circle,n[0]-this._r,n[1]-this._r);var i=e.getImageData(0,0,this._width,this._height);return this._colorize(i.data,this._grad),e.putImageData(i,0,0),this},_colorize:function(t,e){for(var n,o=3,r=t.length;r>o;o+=4)(n=4*t[o])&&(t[o-3]=e[n],t[o-2]=e[n+1],t[o-1]=e[n+2])}},window.simpleheat=t}(),L.HeatLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(t,e){this._latlngs=t,L.setOptions(this,e)},setLatLngs:function(t){return this._latlngs=t,this.redraw()},addLatLng:function(t){return this._latlngs.push(t),this.redraw()},setOptions:function(t){return L.setOptions(this,t),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return!this._heat||this._frame||this._map._animating||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(t){this._map=t,this._canvas||this._initCanvas(),t._panes.overlayPane.appendChild(this._canvas),t.on(\"moveend\",this._reset,this),t.options.zoomAnimation&&L.Browser.any3d&&t.on(\"zoomanim\",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._canvas),t.off(\"moveend\",this._reset,this),t.options.zoomAnimation&&t.off(\"zoomanim\",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},_initCanvas:function(){var t=this._canvas=L.DomUtil.create(\"canvas\",\"leaflet-heatmap-layer leaflet-layer\"),e=L.DomUtil.testProp([\"transformOrigin\",\"WebkitTransformOrigin\",\"msTransformOrigin\"]);t.style[e]=\"50% 50%\";var n=this._map.getSize();t.width=n.x,t.height=n.y;var o=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(t,\"leaflet-zoom-\"+(o?\"animated\":\"hide\")),this._heat=simpleheat(t),this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur),this.options.gradient&&this._heat.gradient(this.options.gradient),this.options.max&&this._heat.max(this.options.max)},_reset:function(){var t=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,t);var e=this._map.getSize();this._heat._width!==e.x&&(this._canvas.width=this._heat._width=e.x),this._heat._height!==e.y&&(this._canvas.height=this._heat._height=e.y),this._redraw()},_redraw:function(){var t,e,n,o,r,i,a,l,s,c=[],p=this._heat._r,u=this._map.getSize(),f=new L.Bounds(L.point([-p,-p]),u.add([p,p])),d=void 0===this.options.max?1:this.options.max,h=void 0===this.options.maxZoom?this._map.getMaxZoom():this.options.maxZoom,m=1/Math.pow(2,Math.max(0,Math.min(h-this._map.getZoom(),12))),b=p/2,y=[],g=this._map._getMapPanePos(),v=g.x%b,_=g.y%b;for(t=0,e=this._latlngs.length;e>t;t++)if(n=this._map.latLngToContainerPoint(this._latlngs[t]),f.contains(n)){r=Math.floor((n.x-v)/b)+2,i=Math.floor((n.y-_)/b)+2,s=(void 0!==this._latlngs[t].alt?this._latlngs[t].alt:void 0!==this._latlngs[t][2]?+this._latlngs[t][2]:1)*m,y[i]=y[i]||[],(o=y[i][r])?(o[0]=(o[0]*o[2]+n.x*s)/(o[2]+s),o[1]=(o[1]*o[2]+n.y*s)/(o[2]+s),o[2]+=s):y[i][r]=[n.x,n.y,s]}for(t=0,e=y.length;e>t;t++)if(y[t])for(a=0,l=y[t].length;l>a;a++)(o=y[t][a])&&c.push([Math.round(o[0]),Math.round(o[1]),Math.min(o[2],d)]);this._heat.data(c).draw(this.options.minOpacity),this._frame=null},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._getCenterOffset(t.center)._multiplyBy(-e).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,n,e):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(n)+\" scale(\"+e+\")\"}}),L.heatLayer=function(t,e){return new L.HeatLayer(t,e)}},function(t,e,n){\"use strict\";var o=n(14);function r(){}function i(){}i.resetWarningCache=r,t.exports=function(){function t(t,e,n,r,i,a){if(a!==o){var l=new Error(\"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types\");throw l.name=\"Invariant Violation\",l}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:r};return n.PropTypes=n,n}},function(t,e,n){\"use strict\";t.exports=\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\"},function(t,e,n){\"use strict\";n.r(e);var o=n(2),r=n.n(o),i=n(4),a=n.n(i),l=n(3),s=n.n(l),c=n(1),p=n.n(c),u=(n(16),n(0)),f=n.n(u);function d(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,t)}return function(t,e,n){e&&d(t.prototype,e),n&&d(t,n)}(t,null,[{key:\"getItem\",value:function(t){try{return localStorage.getItem(t)}catch(e){console.warn(\"Failed to call getItem \"+t,e)}}},{key:\"setItem\",value:function(t,e){try{localStorage.setItem(t,e)}catch(e){console.warn(\"Failed to call setItem \"+t,e)}}}]),t}(),m=(n(19),n(5)),b=n.n(m),y=n(6);function g(t){\"@babel/helpers - typeof\";return(g=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(\"undefined\"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(o=(a=l.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==l.return||l.return()}finally{if(r)throw i}}return n}(t,e)||function(t,e){if(!t)return;if(\"string\"==typeof t)return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);\"Object\"===n&&t.constructor&&(n=t.constructor.name);if(\"Map\"===n||\"Set\"===n)return Array.from(t);if(\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(t,e)}(t,e)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function w(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function O(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=x(t);if(e){var r=x(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return function(t,e){if(e&&(\"object\"===g(e)||\"function\"==typeof e))return e;return S(t)}(this,n)}}function S(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var k=function(t){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(n,f.a.Component);var e=O(n);function n(t){var o;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,n),(o=e.call(this,t)).close=o.close.bind(S(o)),o}return function(t,e,n){e&&w(t.prototype,e),n&&w(t,n)}(n,[{key:\"close\",value:function(){var t=v(this.props.bind,2),e=t[0],n=t[1];e.setState(T({},n,\"\"))}},{key:\"render\",value:function(){var t=v(this.props.bind,2),e=t[0],n=t[1];return e.state[n]?f.a.createElement(\"div\",{className:\"alert alert-warning alert-dismissible \"+(this.props.className?this.props.className:\"\")},f.a.createElement(\"button\",{type:\"button\",className:\"close\",title:Object(y._)(\"Close\"),onClick:this.close},f.a.createElement(\"span\",{\"aria-hidden\":\"true\"},\"Ã—\")),e.state[n]):f.a.createElement(\"div\",null)}}]),n}();T(k,\"propTypes\",{bind:b.a.array.isRequired});var L=k;function C(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function P(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R(){return(R=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function N(t,e){return(N=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function I(t,e){return!e||\"object\"!=typeof e&&\"function\"!=typeof e?function(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}(t):e}function B(t){return function(){return t}}var M=function(){};M.thatReturns=B,M.thatReturnsFalse=B(!1),M.thatReturnsTrue=B(!0),M.thatReturnsNull=B(null),M.thatReturnsThis=function(){return this},M.thatReturnsArgument=function(t){return t};var D=M,H=function(t){};var U=function(t,e,n,o,r,i,a,l){if(H(e),!t){var s;if(void 0===e)s=new Error(\"Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.\");else{var c=[n,o,r,i,a,l],p=0;(s=new Error(e.replace(/%s/g,function(){return c[p++]}))).name=\"Invariant Violation\"}throw s.framesToPop=1,s}},F=Object.getOwnPropertySymbols,q=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var t=new String(\"abc\");if(t[5]=\"de\",\"5\"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e[\"_\"+String.fromCharCode(n)]=n;if(\"0123456789\"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(\"\"))return!1;var o={};return\"abcdefghijklmnopqrst\".split(\"\").forEach(function(t){o[t]=t}),\"abcdefghijklmnopqrst\"===Object.keys(Object.assign({},o)).join(\"\")}catch(t){return!1}})()&&Object.assign;var z=\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\";var G=function(t,e){return t(e={exports:{}},e.exports),e.exports}(function(t){t.exports=function(){function t(t,e,n,o,r,i){i!==z&&U(!1,\"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types\")}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=D,n.PropTypes=n,n}()}),Y={GLOBAL:{HIDE:\"__react_tooltip_hide_event\",REBUILD:\"__react_tooltip_rebuild_event\",SHOW:\"__react_tooltip_show_event\"}},J=function(t,e){var n;\"function\"==typeof window.CustomEvent?n=new window.CustomEvent(t,{detail:e}):((n=document.createEvent(\"Event\")).initEvent(t,!1,!0),n.detail=e),window.dispatchEvent(n)};var V=function(t,e){var n=this.state.show,o=this.props.id,r=this.isCapture(e.currentTarget),i=e.currentTarget.getAttribute(\"currentItem\");r||e.stopPropagation(),n&&\"true\"===i?t||this.hideTooltip(e):(e.currentTarget.setAttribute(\"currentItem\",\"true\"),X(e.currentTarget,this.getTargetArray(o)),this.showTooltip(e))},X=function(t,e){for(var n=0;n<e.length;n++)t!==e[n]?e[n].setAttribute(\"currentItem\",\"false\"):e[n].setAttribute(\"currentItem\",\"true\")},Z={id:\"9b69f92e-d3fe-498b-b1b4-c5e63a51b0cf\",set:function(t,e,n){this.id in t?t[this.id][e]=n:Object.defineProperty(t,this.id,{configurable:!0,value:P({},e,n)})},get:function(t,e){var n=t[this.id];if(void 0!==n)return n[e]}};var K=function(t,e,n){var o=e.respectEffect,r=void 0!==o&&o,i=e.customEvent,a=void 0!==i&&i,l=this.props.id,s=n.target.getAttribute(\"data-tip\")||null,c=n.target.getAttribute(\"data-for\")||null,p=n.target;if(!this.isCustomEvent(p)||a){var u=null==l&&null==c||c===l;if(null!=s&&(!r||\"float\"===this.getEffect(p))&&u){var f=function(t){var e={};for(var n in t)\"function\"==typeof t[n]?e[n]=t[n].bind(t):e[n]=t[n];return e}(n);f.currentTarget=p,t(f)}}},Q=function(t,e){var n={};return t.forEach(function(t){var o=t.getAttribute(e);o&&o.split(\" \").forEach(function(t){return n[t]=!0})}),n},tt=function(){return document.getElementsByTagName(\"body\")[0]};var et=function(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver};function nt(t,e,n,o,r,i,a){for(var l=at(n),s=l.width,c=l.height,p=at(e),u=p.width,f=p.height,d=lt(t,e,i),h=d.mouseX,m=d.mouseY,b=st(i,u,f,s,c),y=ct(a),g=y.extraOffset_X,v=y.extraOffset_Y,_=window.innerWidth,w=window.innerHeight,E=pt(n),O=E.parentTop,S=E.parentLeft,x=function(t){var e=b[t].l;return h+e+g},T=function(t){var e=b[t].t;return m+e+v},k=function(t){return function(t){var e=b[t].r;return h+e+g}(t)>_},L=function(t){return function(t){var e=b[t].b;return m+e+v}(t)>w},C=function(t){return function(t){return x(t)<0}(t)||k(t)||function(t){return T(t)<0}(t)||L(t)},P=function(t){return!C(t)},R=[\"top\",\"bottom\",\"left\",\"right\"],j=[],A=0;A<4;A++){var N=R[A];P(N)&&j.push(N)}var I,B=!1,M=r!==o;return P(r)&&M?(B=!0,I=r):j.length>0&&M&&C(r)&&C(o)&&(B=!0,I=j[0]),B?{isNewState:!0,newState:{place:I}}:{isNewState:!1,position:{left:parseInt(x(o)-S,10),top:parseInt(T(o)-O,10)}}}var ot,rt,it,at=function(t){var e=t.getBoundingClientRect(),n=e.height,o=e.width;return{height:parseInt(n,10),width:parseInt(o,10)}},lt=function(t,e,n){var o=e.getBoundingClientRect(),r=o.top,i=o.left,a=at(e),l=a.width,s=a.height;return\"float\"===n?{mouseX:t.clientX,mouseY:t.clientY}:{mouseX:i+l/2,mouseY:r+s/2}},st=function(t,e,n,o,r){var i,a,l,s;return\"float\"===t?(i={l:-o/2,r:o/2,t:-(r+3+2),b:-3},l={l:-o/2,r:o/2,t:15,b:r+3+2+12},s={l:-(o+3+2),r:-3,t:-r/2,b:r/2},a={l:3,r:o+3+2,t:-r/2,b:r/2}):\"solid\"===t&&(i={l:-o/2,r:o/2,t:-(n/2+r+2),b:-n/2},l={l:-o/2,r:o/2,t:n/2,b:n/2+r+2},s={l:-(o+e/2+2),r:-e/2,t:-r/2,b:r/2},a={l:e/2,r:o+e/2+2,t:-r/2,b:r/2}),{top:i,bottom:l,left:s,right:a}},ct=function(t){var e=0,n=0;for(var o in\"[object String]\"===Object.prototype.toString.apply(t)&&(t=JSON.parse(t.toString().replace(/\\'/g,'\"'))),t)\"top\"===o?n-=parseInt(t[o],10):\"bottom\"===o?n+=parseInt(t[o],10):\"left\"===o?e-=parseInt(t[o],10):\"right\"===o&&(e+=parseInt(t[o],10));return{extraOffset_X:e,extraOffset_Y:n}},pt=function(t){for(var e=t;e&&\"none\"===window.getComputedStyle(e).getPropertyValue(\"transform\");)e=e.parentElement;return{parentTop:e&&e.getBoundingClientRect().top||0,parentLeft:e&&e.getBoundingClientRect().left||0}};function ut(t,e,n,o){if(e)return e;if(void 0!==n&&null!==n)return n;if(null===n)return null;var r=/<br\\s*\\/?>/;return o&&\"false\"!==o&&r.test(t)?t.split(r).map(function(t,e){return f.a.createElement(\"span\",{key:e,className:\"multi-line\"},t)}):t}function ft(t){var e={};return Object.keys(t).filter(function(t){return/(^aria-\\w+$|^role$)/.test(t)}).forEach(function(n){e[n]=t[n]}),e}!function(t){if(t&&\"undefined\"!=typeof window){var e=document.createElement(\"style\");e.setAttribute(\"type\",\"text/css\"),e.innerHTML=t,document.head.appendChild(e)}}('.__react_component_tooltip {\\n  border-radius: 3px;\\n  display: inline-block;\\n  font-size: 13px;\\n  left: -999em;\\n  opacity: 0;\\n  padding: 8px 21px;\\n  position: fixed;\\n  pointer-events: none;\\n  transition: opacity 0.3s ease-out;\\n  top: -999em;\\n  visibility: hidden;\\n  z-index: 999;\\n}\\n.__react_component_tooltip.allow_hover, .__react_component_tooltip.allow_click {\\n  pointer-events: auto;\\n}\\n.__react_component_tooltip:before, .__react_component_tooltip:after {\\n  content: \"\";\\n  width: 0;\\n  height: 0;\\n  position: absolute;\\n}\\n.__react_component_tooltip.show {\\n  opacity: 0.9;\\n  margin-top: 0px;\\n  margin-left: 0px;\\n  visibility: visible;\\n}\\n.__react_component_tooltip.type-dark {\\n  color: #fff;\\n  background-color: #222;\\n}\\n.__react_component_tooltip.type-dark.place-top:after {\\n  border-top-color: #222;\\n  border-top-style: solid;\\n  border-top-width: 6px;\\n}\\n.__react_component_tooltip.type-dark.place-bottom:after {\\n  border-bottom-color: #222;\\n  border-bottom-style: solid;\\n  border-bottom-width: 6px;\\n}\\n.__react_component_tooltip.type-dark.place-left:after {\\n  border-left-color: #222;\\n  border-left-style: solid;\\n  border-left-width: 6px;\\n}\\n.__react_component_tooltip.type-dark.place-right:after {\\n  border-right-color: #222;\\n  border-right-style: solid;\\n  border-right-width: 6px;\\n}\\n.__react_component_tooltip.type-dark.border {\\n  border: 1px solid #fff;\\n}\\n.__react_component_tooltip.type-dark.border.place-top:before {\\n  border-top: 8px solid #fff;\\n}\\n.__react_component_tooltip.type-dark.border.place-bottom:before {\\n  border-bottom: 8px solid #fff;\\n}\\n.__react_component_tooltip.type-dark.border.place-left:before {\\n  border-left: 8px solid #fff;\\n}\\n.__react_component_tooltip.type-dark.border.place-right:before {\\n  border-right: 8px solid #fff;\\n}\\n.__react_component_tooltip.type-success {\\n  color: #fff;\\n  background-color: #8DC572;\\n}\\n.__react_component_tooltip.type-success.place-top:after {\\n  border-top-color: #8DC572;\\n  border-top-style: solid;\\n  border-top-width: 6px;\\n}\\n.__react_component_tooltip.type-success.place-bottom:after {\\n  border-bottom-color: #8DC572;\\n  border-bottom-style: solid;\\n  border-bottom-width: 6px;\\n}\\n.__react_component_tooltip.type-success.place-left:after {\\n  border-left-color: #8DC572;\\n  border-left-style: solid;\\n  border-left-width: 6px;\\n}\\n.__react_component_tooltip.type-success.place-right:after {\\n  border-right-color: #8DC572;\\n  border-right-style: solid;\\n  border-right-width: 6px;\\n}\\n.__react_component_tooltip.type-success.border {\\n  border: 1px solid #fff;\\n}\\n.__react_component_tooltip.type-success.border.place-top:before {\\n  border-top: 8px solid #fff;\\n}\\n.__react_component_tooltip.type-success.border.place-bottom:before {\\n  border-bottom: 8px solid #fff;\\n}\\n.__react_component_tooltip.type-success.border.place-left:before {\\n  border-left: 8px solid #fff;\\n}\\n.__react_component_tooltip.type-success.border.place-right:before {\\n  border-right: 8px solid #fff;\\n}\\n.__react_component_tooltip.type-warning {\\n  color: #fff;\\n  background-color: #F0AD4E;\\n}\\n.__react_component_tooltip.type-warning.place-top:after {\\n  border-top-color: #F0AD4E;\\n  border-top-style: solid;\\n  border-top-width: 6px;\\n}\\n.__react_component_tooltip.type-warning.place-bottom:after {\\n  border-bottom-color: #F0AD4E;\\n  border-bottom-style: solid;\\n  border-bottom-width: 6px;\\n}\\n.__react_component_tooltip.type-warning.place-left:after {\\n  border-left-color: #F0AD4E;\\n  border-left-style: solid;\\n  border-left-width: 6px;\\n}\\n.__react_component_tooltip.type-warning.place-right:after {\\n  border-right-color: #F0AD4E;\\n  border-right-style: solid;\\n  border-right-width: 6px;\\n}\\n.__react_component_tooltip.type-warning.border {\\n  border: 1px solid #fff;\\n}\\n.__react_component_tooltip.type-warning.border.place-top:before {\\n  border-top: 8px solid #fff;\\n}\\n.__react_component_tooltip.type-warning.border.place-bottom:before {\\n  border-bottom: 8px solid #fff;\\n}\\n.__react_component_tooltip.type-warning.border.place-left:before {\\n  border-left: 8px solid #fff;\\n}\\n.__react_component_tooltip.type-warning.border.place-right:before {\\n  border-right: 8px solid #fff;\\n}\\n.__react_component_tooltip.type-error {\\n  color: #fff;\\n  background-color: #BE6464;\\n}\\n.__react_component_tooltip.type-error.place-top:after {\\n  border-top-color: #BE6464;\\n  border-top-style: solid;\\n  border-top-width: 6px;\\n}\\n.__react_component_tooltip.type-error.place-bottom:after {\\n  border-bottom-color: #BE6464;\\n  border-bottom-style: solid;\\n  border-bottom-width: 6px;\\n}\\n.__react_component_tooltip.type-error.place-left:after {\\n  border-left-color: #BE6464;\\n  border-left-style: solid;\\n  border-left-width: 6px;\\n}\\n.__react_component_tooltip.type-error.place-right:after {\\n  border-right-color: #BE6464;\\n  border-right-style: solid;\\n  border-right-width: 6px;\\n}\\n.__react_component_tooltip.type-error.border {\\n  border: 1px solid #fff;\\n}\\n.__react_component_tooltip.type-error.border.place-top:before {\\n  border-top: 8px solid #fff;\\n}\\n.__react_component_tooltip.type-error.border.place-bottom:before {\\n  border-bottom: 8px solid #fff;\\n}\\n.__react_component_tooltip.type-error.border.place-left:before {\\n  border-left: 8px solid #fff;\\n}\\n.__react_component_tooltip.type-error.border.place-right:before {\\n  border-right: 8px solid #fff;\\n}\\n.__react_component_tooltip.type-info {\\n  color: #fff;\\n  background-color: #337AB7;\\n}\\n.__react_component_tooltip.type-info.place-top:after {\\n  border-top-color: #337AB7;\\n  border-top-style: solid;\\n  border-top-width: 6px;\\n}\\n.__react_component_tooltip.type-info.place-bottom:after {\\n  border-bottom-color: #337AB7;\\n  border-bottom-style: solid;\\n  border-bottom-width: 6px;\\n}\\n.__react_component_tooltip.type-info.place-left:after {\\n  border-left-color: #337AB7;\\n  border-left-style: solid;\\n  border-left-width: 6px;\\n}\\n.__react_component_tooltip.type-info.place-right:after {\\n  border-right-color: #337AB7;\\n  border-right-style: solid;\\n  border-right-width: 6px;\\n}\\n.__react_component_tooltip.type-info.border {\\n  border: 1px solid #fff;\\n}\\n.__react_component_tooltip.type-info.border.place-top:before {\\n  border-top: 8px solid #fff;\\n}\\n.__react_component_tooltip.type-info.border.place-bottom:before {\\n  border-bottom: 8px solid #fff;\\n}\\n.__react_component_tooltip.type-info.border.place-left:before {\\n  border-left: 8px solid #fff;\\n}\\n.__react_component_tooltip.type-info.border.place-right:before {\\n  border-right: 8px solid #fff;\\n}\\n.__react_component_tooltip.type-light {\\n  color: #222;\\n  background-color: #fff;\\n}\\n.__react_component_tooltip.type-light.place-top:after {\\n  border-top-color: #fff;\\n  border-top-style: solid;\\n  border-top-width: 6px;\\n}\\n.__react_component_tooltip.type-light.place-bottom:after {\\n  border-bottom-color: #fff;\\n  border-bottom-style: solid;\\n  border-bottom-width: 6px;\\n}\\n.__react_component_tooltip.type-light.place-left:after {\\n  border-left-color: #fff;\\n  border-left-style: solid;\\n  border-left-width: 6px;\\n}\\n.__react_component_tooltip.type-light.place-right:after {\\n  border-right-color: #fff;\\n  border-right-style: solid;\\n  border-right-width: 6px;\\n}\\n.__react_component_tooltip.type-light.border {\\n  border: 1px solid #222;\\n}\\n.__react_component_tooltip.type-light.border.place-top:before {\\n  border-top: 8px solid #222;\\n}\\n.__react_component_tooltip.type-light.border.place-bottom:before {\\n  border-bottom: 8px solid #222;\\n}\\n.__react_component_tooltip.type-light.border.place-left:before {\\n  border-left: 8px solid #222;\\n}\\n.__react_component_tooltip.type-light.border.place-right:before {\\n  border-right: 8px solid #222;\\n}\\n.__react_component_tooltip.place-top {\\n  margin-top: -10px;\\n}\\n.__react_component_tooltip.place-top:before {\\n  border-left: 10px solid transparent;\\n  border-right: 10px solid transparent;\\n  bottom: -8px;\\n  left: 50%;\\n  margin-left: -10px;\\n}\\n.__react_component_tooltip.place-top:after {\\n  border-left: 8px solid transparent;\\n  border-right: 8px solid transparent;\\n  bottom: -6px;\\n  left: 50%;\\n  margin-left: -8px;\\n}\\n.__react_component_tooltip.place-bottom {\\n  margin-top: 10px;\\n}\\n.__react_component_tooltip.place-bottom:before {\\n  border-left: 10px solid transparent;\\n  border-right: 10px solid transparent;\\n  top: -8px;\\n  left: 50%;\\n  margin-left: -10px;\\n}\\n.__react_component_tooltip.place-bottom:after {\\n  border-left: 8px solid transparent;\\n  border-right: 8px solid transparent;\\n  top: -6px;\\n  left: 50%;\\n  margin-left: -8px;\\n}\\n.__react_component_tooltip.place-left {\\n  margin-left: -10px;\\n}\\n.__react_component_tooltip.place-left:before {\\n  border-top: 6px solid transparent;\\n  border-bottom: 6px solid transparent;\\n  right: -8px;\\n  top: 50%;\\n  margin-top: -5px;\\n}\\n.__react_component_tooltip.place-left:after {\\n  border-top: 5px solid transparent;\\n  border-bottom: 5px solid transparent;\\n  right: -6px;\\n  top: 50%;\\n  margin-top: -4px;\\n}\\n.__react_component_tooltip.place-right {\\n  margin-left: 10px;\\n}\\n.__react_component_tooltip.place-right:before {\\n  border-top: 6px solid transparent;\\n  border-bottom: 6px solid transparent;\\n  left: -8px;\\n  top: 50%;\\n  margin-top: -5px;\\n}\\n.__react_component_tooltip.place-right:after {\\n  border-top: 5px solid transparent;\\n  border-bottom: 5px solid transparent;\\n  left: -6px;\\n  top: 50%;\\n  margin-top: -4px;\\n}\\n.__react_component_tooltip .multi-line {\\n  display: block;\\n  padding: 2px 0px;\\n  text-align: center;\\n}');var dt=function(t){t.hide=function(t){J(Y.GLOBAL.HIDE,{target:t})},t.rebuild=function(){J(Y.GLOBAL.REBUILD)},t.show=function(t){J(Y.GLOBAL.SHOW,{target:t})},t.prototype.globalRebuild=function(){this.mount&&(this.unbindListener(),this.bindListener())},t.prototype.globalShow=function(t){if(this.mount){var e={currentTarget:t.detail.target};this.showTooltip(e,!0)}},t.prototype.globalHide=function(t){if(this.mount){var e=!!(t&&t.detail&&t.detail.target);this.hideTooltip({currentTarget:e&&t.detail.target},e)}}}(ot=function(t){t.prototype.bindWindowEvents=function(t){window.removeEventListener(Y.GLOBAL.HIDE,this.globalHide),window.addEventListener(Y.GLOBAL.HIDE,this.globalHide,!1),window.removeEventListener(Y.GLOBAL.REBUILD,this.globalRebuild),window.addEventListener(Y.GLOBAL.REBUILD,this.globalRebuild,!1),window.removeEventListener(Y.GLOBAL.SHOW,this.globalShow),window.addEventListener(Y.GLOBAL.SHOW,this.globalShow,!1),t&&(window.removeEventListener(\"resize\",this.onWindowResize),window.addEventListener(\"resize\",this.onWindowResize,!1))},t.prototype.unbindWindowEvents=function(){window.removeEventListener(Y.GLOBAL.HIDE,this.globalHide),window.removeEventListener(Y.GLOBAL.REBUILD,this.globalRebuild),window.removeEventListener(Y.GLOBAL.SHOW,this.globalShow),window.removeEventListener(\"resize\",this.onWindowResize)},t.prototype.onWindowResize=function(){this.mount&&this.hideTooltip()}}(ot=function(t){t.prototype.isCustomEvent=function(t){return this.state.event||!!t.getAttribute(\"data-event\")},t.prototype.customBindListener=function(t){var e=this,n=this.state,o=n.event,r=n.eventOff,i=t.getAttribute(\"data-event\")||o,a=t.getAttribute(\"data-event-off\")||r;i.split(\" \").forEach(function(n){t.removeEventListener(n,Z.get(t,n));var o=V.bind(e,a);Z.set(t,n,o),t.addEventListener(n,o,!1)}),a&&a.split(\" \").forEach(function(n){t.removeEventListener(n,e.hideTooltip),t.addEventListener(n,e.hideTooltip,!1)})},t.prototype.customUnbindListener=function(t){var e=this.state,n=e.event,o=e.eventOff,r=n||t.getAttribute(\"data-event\"),i=o||t.getAttribute(\"data-event-off\");t.removeEventListener(r,Z.get(t,n)),i&&t.removeEventListener(i,this.hideTooltip)}}(ot=function(t){t.prototype.isCapture=function(t){return t&&\"true\"===t.getAttribute(\"data-iscapture\")||this.props.isCapture||!1}}(ot=function(t){t.prototype.getEffect=function(t){return t.getAttribute(\"data-effect\")||this.props.effect||\"float\"}}(ot=function(t){t.prototype.isBodyMode=function(){return!!this.props.bodyMode},t.prototype.bindBodyListener=function(t){var e=this,n=this.state,o=n.event,r=n.eventOff,i=n.possibleCustomEvents,a=n.possibleCustomEventsOff,l=tt(),s=Q(t,\"data-event\"),c=Q(t,\"data-event-off\");null!=o&&(s[o]=!0),null!=r&&(c[r]=!0),i.split(\" \").forEach(function(t){return s[t]=!0}),a.split(\" \").forEach(function(t){return c[t]=!0}),this.unbindBodyListener(l);var p=this.bodyModeListeners={};for(var u in null==o&&(p.mouseover=K.bind(this,this.showTooltip,{}),p.mousemove=K.bind(this,this.updateTooltip,{respectEffect:!0}),p.mouseout=K.bind(this,this.hideTooltip,{})),s)p[u]=K.bind(this,function(t){var n=t.currentTarget.getAttribute(\"data-event-off\")||r;V.call(e,n,t)},{customEvent:!0});for(var f in c)p[f]=K.bind(this,this.hideTooltip,{customEvent:!0});for(var d in p)l.addEventListener(d,p[d])},t.prototype.unbindBodyListener=function(t){t=t||tt();var e=this.bodyModeListeners;for(var n in e)t.removeEventListener(n,e[n])}}(ot=function(t){t.prototype.bindRemovalTracker=function(){var t=this,e=et();if(null!=e){var n=new e(function(e){for(var n=0;n<e.length;n++)for(var o=e[n],r=0;r<o.removedNodes.length;r++)if(o.removedNodes[r]===t.state.currentTarget)return void t.hideTooltip()});n.observe(window.document,{childList:!0,subtree:!0}),this.removalTracker=n}},t.prototype.unbindRemovalTracker=function(){this.removalTracker&&(this.removalTracker.disconnect(),this.removalTracker=null)}}((it=rt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e),(n=I(this,A(e).call(this,t))).state={place:t.place||\"top\",desiredPlace:t.place||\"top\",type:\"dark\",effect:\"float\",show:!1,border:!1,offset:{},extraClass:\"\",html:!1,delayHide:0,delayShow:0,event:t.event||null,eventOff:t.eventOff||null,currentEvent:null,currentTarget:null,ariaProps:ft(t),isEmptyTip:!1,disable:!1,possibleCustomEvents:t.possibleCustomEvents||\"\",possibleCustomEventsOff:t.possibleCustomEventsOff||\"\",originTooltip:null,isMultiline:!1},n.bind([\"showTooltip\",\"updateTooltip\",\"hideTooltip\",\"hideTooltipOnScroll\",\"getTooltipContent\",\"globalRebuild\",\"globalShow\",\"globalHide\",\"onWindowResize\",\"mouseOnToolTip\"]),n.mount=!0,n.delayShowLoop=null,n.delayHideLoop=null,n.delayReshow=null,n.intervalUpdateContent=null,n}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&N(t,e)}(e,f.a.Component),function(t,e,n){e&&C(t.prototype,e),n&&C(t,n)}(e,[{key:\"bind\",value:function(t){var e=this;t.forEach(function(t){e[t]=e[t].bind(e)})}},{key:\"componentDidMount\",value:function(){var t=this.props,e=(t.insecure,t.resizeHide);this.bindListener(),this.bindWindowEvents(e)}},{key:\"componentWillUnmount\",value:function(){this.mount=!1,this.clearTimer(),this.unbindListener(),this.removeScrollListener(),this.unbindWindowEvents()}},{key:\"mouseOnToolTip\",value:function(){return!(!this.state.show||!this.tooltipRef)&&(this.tooltipRef.matches||(this.tooltipRef.msMatchesSelector?this.tooltipRef.matches=this.tooltipRef.msMatchesSelector:this.tooltipRef.matches=this.tooltipRef.mozMatchesSelector),this.tooltipRef.matches(\":hover\"))}},{key:\"getTargetArray\",value:function(t){var e;if(t){var n=t.replace(/\\\\/g,\"\\\\\\\\\").replace(/\"/g,'\\\\\"');e=document.querySelectorAll('[data-tip][data-for=\"'.concat(n,'\"]'))}else e=document.querySelectorAll(\"[data-tip]:not([data-for])\");return function(t){var e=t.length;return t.hasOwnProperty?Array.prototype.slice.call(t):new Array(e).fill().map(function(e){return t[e]})}(e)}},{key:\"bindListener\",value:function(){var t=this,e=this.props,n=e.id,o=e.globalEventOff,r=e.isCapture,i=this.getTargetArray(n);i.forEach(function(e){null===e.getAttribute(\"currentItem\")&&e.setAttribute(\"currentItem\",\"false\"),t.unbindBasicListener(e),t.isCustomEvent(e)&&t.customUnbindListener(e)}),this.isBodyMode()?this.bindBodyListener(i):i.forEach(function(e){var n=t.isCapture(e),o=t.getEffect(e);t.isCustomEvent(e)?t.customBindListener(e):(e.addEventListener(\"mouseenter\",t.showTooltip,n),\"float\"===o&&e.addEventListener(\"mousemove\",t.updateTooltip,n),e.addEventListener(\"mouseleave\",t.hideTooltip,n))}),o&&(window.removeEventListener(o,this.hideTooltip),window.addEventListener(o,this.hideTooltip,r)),this.bindRemovalTracker()}},{key:\"unbindListener\",value:function(){var t=this,e=this.props,n=e.id,o=e.globalEventOff;this.isBodyMode()?this.unbindBodyListener():this.getTargetArray(n).forEach(function(e){t.unbindBasicListener(e),t.isCustomEvent(e)&&t.customUnbindListener(e)});o&&window.removeEventListener(o,this.hideTooltip),this.unbindRemovalTracker()}},{key:\"unbindBasicListener\",value:function(t){var e=this.isCapture(t);t.removeEventListener(\"mouseenter\",this.showTooltip,e),t.removeEventListener(\"mousemove\",this.updateTooltip,e),t.removeEventListener(\"mouseleave\",this.hideTooltip,e)}},{key:\"getTooltipContent\",value:function(){var t,e=this.props,n=e.getContent,o=e.children;return n&&(t=Array.isArray(n)?n[0]&&n[0](this.state.originTooltip):n(this.state.originTooltip)),ut(this.state.originTooltip,o,t,this.state.isMultiline)}},{key:\"isEmptyTip\",value:function(t){return\"string\"==typeof t&&\"\"===t||null===t}},{key:\"showTooltip\",value:function(t,e){if(e&&!this.getTargetArray(this.props.id).some(function(e){return e===t.currentTarget}))return;var n=this.props,o=n.multiline,r=n.getContent,i=t.currentTarget.getAttribute(\"data-tip\"),a=t.currentTarget.getAttribute(\"data-multiline\")||o||!1,l=t instanceof window.FocusEvent||e,s=!0;t.currentTarget.getAttribute(\"data-scroll-hide\")?s=\"true\"===t.currentTarget.getAttribute(\"data-scroll-hide\"):null!=this.props.scrollHide&&(s=this.props.scrollHide);var c=t.currentTarget.getAttribute(\"data-place\")||this.props.place||\"top\",p=l?\"solid\":this.getEffect(t.currentTarget),u=t.currentTarget.getAttribute(\"data-offset\")||this.props.offset||{},f=nt(t,t.currentTarget,this.tooltipRef,c,c,p,u);f.position&&this.props.overridePosition&&(f.position=this.props.overridePosition(f.position,t.currentTarget,this.tooltipRef,c,c,p,u));var d=f.isNewState?f.newState.place:c;this.clearTimer();var h=t.currentTarget,m=this.state.show?h.getAttribute(\"data-delay-update\")||this.props.delayUpdate:0,b=this,y=function(){b.setState({originTooltip:i,isMultiline:a,desiredPlace:c,place:d,type:h.getAttribute(\"data-type\")||b.props.type||\"dark\",effect:p,offset:u,html:h.getAttribute(\"data-html\")?\"true\"===h.getAttribute(\"data-html\"):b.props.html||!1,delayShow:h.getAttribute(\"data-delay-show\")||b.props.delayShow||0,delayHide:h.getAttribute(\"data-delay-hide\")||b.props.delayHide||0,delayUpdate:h.getAttribute(\"data-delay-update\")||b.props.delayUpdate||0,border:h.getAttribute(\"data-border\")?\"true\"===h.getAttribute(\"data-border\"):b.props.border||!1,extraClass:h.getAttribute(\"data-class\")||b.props.class||b.props.className||\"\",disable:h.getAttribute(\"data-tip-disable\")?\"true\"===h.getAttribute(\"data-tip-disable\"):b.props.disable||!1,currentTarget:h},function(){s&&b.addScrollListener(b.state.currentTarget),b.updateTooltip(t),r&&Array.isArray(r)&&(b.intervalUpdateContent=setInterval(function(){if(b.mount){var t=b.props.getContent,e=ut(i,\"\",t[0](),a),n=b.isEmptyTip(e);b.setState({isEmptyTip:n}),b.updatePosition()}},r[1]))})};m?this.delayReshow=setTimeout(y,m):y()}},{key:\"updateTooltip\",value:function(t){var e=this,n=this.state,o=n.delayShow,r=n.disable,i=this.props.afterShow,a=this.getTooltipContent(),l=parseInt(o,10),s=t.currentTarget||t.target;if(!this.mouseOnToolTip()&&!this.isEmptyTip(a)&&!r){var c=function(){if(Array.isArray(a)&&a.length>0||a){var n=!e.state.show;e.setState({currentEvent:t,currentTarget:s,show:!0},function(){e.updatePosition(),n&&i&&i(t)})}};clearTimeout(this.delayShowLoop),o?this.delayShowLoop=setTimeout(c,l):c()}}},{key:\"listenForTooltipExit\",value:function(){this.state.show&&this.tooltipRef&&this.tooltipRef.addEventListener(\"mouseleave\",this.hideTooltip)}},{key:\"removeListenerForTooltipExit\",value:function(){this.state.show&&this.tooltipRef&&this.tooltipRef.removeEventListener(\"mouseleave\",this.hideTooltip)}},{key:\"hideTooltip\",value:function(t,e){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isScroll:!1},r=this.state.disable,i=o.isScroll?0:this.state.delayHide,a=this.props.afterHide,l=this.getTooltipContent();if(this.mount&&!this.isEmptyTip(l)&&!r){if(e)if(!this.getTargetArray(this.props.id).some(function(e){return e===t.currentTarget})||!this.state.show)return;var s=function(){var e=n.state.show;n.mouseOnToolTip()?n.listenForTooltipExit():(n.removeListenerForTooltipExit(),n.setState({show:!1},function(){n.removeScrollListener(),e&&a&&a(t)}))};this.clearTimer(),i?this.delayHideLoop=setTimeout(s,parseInt(i,10)):s()}}},{key:\"hideTooltipOnScroll\",value:function(t,e){this.hideTooltip(t,e,{isScroll:!0})}},{key:\"addScrollListener\",value:function(t){var e=this.isCapture(t);window.addEventListener(\"scroll\",this.hideTooltipOnScroll,e)}},{key:\"removeScrollListener\",value:function(){window.removeEventListener(\"scroll\",this.hideTooltipOnScroll)}},{key:\"updatePosition\",value:function(){var t=this,e=this.state,n=e.currentEvent,o=e.currentTarget,r=e.place,i=e.desiredPlace,a=e.effect,l=e.offset,s=this.tooltipRef,c=nt(n,o,s,r,i,a,l);if(c.position&&this.props.overridePosition&&(c.position=this.props.overridePosition(c.position,n,o,s,r,i,a,l)),c.isNewState)return this.setState(c.newState,function(){t.updatePosition()});s.style.left=c.position.left+\"px\",s.style.top=c.position.top+\"px\"}},{key:\"clearTimer\",value:function(){clearTimeout(this.delayShowLoop),clearTimeout(this.delayHideLoop),clearTimeout(this.delayReshow),clearInterval(this.intervalUpdateContent)}},{key:\"render\",value:function(){var t=this,n=this.state,o=n.extraClass,r=n.html,i=n.ariaProps,a=n.disable,l=this.getTooltipContent(),s=this.isEmptyTip(l),c=\"__react_component_tooltip\"+(!this.state.show||a||s?\"\":\" show\")+(this.state.border?\" border\":\"\")+\" place-\".concat(this.state.place)+\" type-\".concat(this.state.type)+(this.props.delayUpdate?\" allow_hover\":\"\")+(this.props.clickable?\" allow_click\":\"\"),p=this.props.wrapper;e.supportedWrappers.indexOf(p)<0&&(p=e.defaultProps.wrapper);var u=[c,o].filter(Boolean).join(\" \");return r?f.a.createElement(p,R({className:u,id:this.props.id,ref:function(e){return t.tooltipRef=e}},i,{\"data-id\":\"tooltip\",dangerouslySetInnerHTML:{__html:l}})):f.a.createElement(p,R({className:u,id:this.props.id},i,{ref:function(e){return t.tooltipRef=e},\"data-id\":\"tooltip\"}),l)}}],[{key:\"getDerivedStateFromProps\",value:function(t,e){var n=e.ariaProps,o=ft(t);return Object.keys(o).some(function(t){return o[t]!==n[t]})?function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach(function(e){P(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},e,{ariaProps:o}):null}}]),e}(),P(rt,\"propTypes\",{children:G.any,place:G.string,type:G.string,effect:G.string,offset:G.object,multiline:G.bool,border:G.bool,insecure:G.bool,class:G.string,className:G.string,id:G.string,html:G.bool,delayHide:G.number,delayUpdate:G.number,delayShow:G.number,event:G.string,eventOff:G.string,watchWindow:G.bool,isCapture:G.bool,globalEventOff:G.string,getContent:G.any,afterShow:G.func,afterHide:G.func,overridePosition:G.func,disable:G.bool,scrollHide:G.bool,resizeHide:G.bool,wrapper:G.string,bodyMode:G.bool,possibleCustomEvents:G.string,possibleCustomEventsOff:G.string,clickable:G.bool}),P(rt,\"defaultProps\",{insecure:!0,resizeHide:!0,wrapper:\"div\",clickable:!1}),P(rt,\"supportedWrappers\",[\"div\",\"span\"]),P(rt,\"displayName\",\"ReactTooltip\"),ot=it))||ot)||ot)||ot)||ot)||ot)||ot)||ot;function ht(t){\"@babel/helpers - typeof\";return(ht=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function mt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(\"undefined\"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(o=(a=l.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(t){r=!0,i=t}finally{try{o||null==l.return||l.return()}finally{if(r)throw i}}return n}(t,e)||function(t,e){if(!t)return;if(\"string\"==typeof t)return bt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);\"Object\"===n&&t.constructor&&(n=t.constructor.name);if(\"Map\"===n||\"Set\"===n)return Array.from(t);if(\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bt(t,e)}(t,e)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function yt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function gt(t,e){return(gt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vt(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=wt(t);if(e){var r=wt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return function(t,e){if(e&&(\"object\"===ht(e)||\"function\"==typeof e))return e;return _t(t)}(this,n)}}function _t(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}function wt(t){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Et(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n(12);var Ot=function(t){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gt(t,e)}(n,f.a.Component);var e=vt(n);function n(t){var o;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,n),Et(_t(o=e.call(this,t)),\"handleSelectMinArea\",function(t){o.setState({minArea:t.target.value})}),Et(_t(o),\"handleSelectResolution\",function(t){o.setState({resolution:t.target.value})}),Et(_t(o),\"handleSelectMinHeight\",function(t){o.setState({minHeight:t.target.value})}),Et(_t(o),\"handleSelectRole\",function(t){o.setState({role:t.target.value})}),Et(_t(o),\"handleSelectOther\",function(t){o.setState({other:t.target.value})}),Et(_t(o),\"handleSelectEpsg\",function(t){o.setState({epsg:t.target.value})}),Et(_t(o),\"handleSelectDisplayType\",function(t){o.setState({displayType:t.target.value})}),Et(_t(o),\"handleChangeAlign\",function(t){o.setState({align:t.target.checked})}),Et(_t(o),\"handleChangeCustomEpsg\",function(t){o.setState({customEpsg:t.target.value})}),Et(_t(o),\"getFormValues\",function(){var t=o.state,e=t.epsg,n=t.customEpsg,r=t.displayType,i=t.align,a=t.resolution,l=t.minHeight,s=t.minArea,c=t.other;return{display_type:r,resolution:a,min_height:l,min_area:s,role:t.role,epsg:\"custom\"!==e?e:n,other_task:c,align:i}}),Et(_t(o),\"waitForCompletion\",function(t,e,n){var o=0;!function r(){$.ajax({type:\"GET\",url:\"/api/plugins/changedetection/task/\".concat(t,\"/changedetection/check/\").concat(e)}).done(function(t){t.error?n(t.error):t.ready?n():setTimeout(function(){return r()},2e3)}).fail(function(t){console.warn(t),o++<10?setTimeout(function(){return r()},2e3):n(JSON.stringify(t))})}()}),Et(_t(o),\"addPreview\",function(t,e){var n=o.props.map;$.getJSON(t).done(function(t){try{if(o.removePreview(),t.max){var i=r.a.heatLayer(t.values,{max:t.max,radius:9,minOpacity:0});i.setStyle=function(e){var n=e.opacity;return i.setOptions({max:t.max/n})},o.setState({previewLayer:i})}else{var a=r.a.featureGroup();t.features.forEach(function(t){var e=t.properties.area.toFixed(2),n=t.properties.min.toFixed(2),o=t.properties.max.toFixed(2),i=t.properties.avg.toFixed(2),l=t.properties.std.toFixed(2),s=r.a.geoJSON(t).bindPopup(\"Area: \".concat(e,\"m2<BR/>Min: \").concat(n,\"m<BR/>Max: \").concat(o,\"m<BR/>Avg: \").concat(i,\"m<BR/>Std: \").concat(l,\"m\"));a.addLayer(s)}),a.geojson=t,o.setState({previewLayer:a})}o.state.previewLayer.addTo(n),e()}catch(t){throw t}}).fail(e)}),Et(_t(o),\"removePreview\",function(){var t=o.props.map;o.state.previewLayer&&(t.removeLayer(o.state.previewLayer),o.setState({previewLayer:null}))}),Et(_t(o),\"generateChangeMap\",function(t,e,n){var r;o.setState((Et(r={},e,!0),Et(r,\"error\",\"\"),r));var i=o.state.task.id;h.setItem(\"last_changedetection_display_type\",o.state.displayType),h.setItem(\"last_changedetection_resolution\",o.state.resolution),h.setItem(\"last_changedetection_min_height\",o.state.minHeight),h.setItem(\"last_changedetection_min_area\",o.state.minArea),h.setItem(\"last_changedetection_epsg\",o.state.epsg),h.setItem(\"last_changedetection_custom_epsg\",o.state.customEpsg),h.setItem(\"last_changedetection_role\",o.state.role),h.setItem(\"last_changedetection_align\",o.state.align),o.generateReq=$.ajax({type:\"POST\",url:\"/api/plugins/changedetection/task/\".concat(i,\"/changedetection/generate\"),data:t}).done(function(t){if(t.celery_task_id)o.waitForCompletion(i,t.celery_task_id,function(r){var a;if(r)o.setState((Et(a={},e,!1),Et(a,\"error\",r),a));else{var l=\"/api/plugins/changedetection/task/\".concat(i,\"/changedetection/download/\").concat(t.celery_task_id);n?o.addPreview(l,function(t){t&&o.setState({error:JSON.stringify(t)}),o.setState(Et({},e,!1))}):(location.href=l,o.setState(Et({},e,!1)))}});else if(t.error){var r;o.setState((Et(r={},e,!1),Et(r,\"error\",t.error),r))}else{var a;o.setState((Et(a={},e,!1),Et(a,\"error\",\"Invalid response: \"+t),a))}}).fail(function(t){var n;o.setState((Et(n={},e,!1),Et(n,\"error\",JSON.stringify(t)),n))})}),Et(_t(o),\"handleExport\",function(t){return function(){var e=o.getFormValues();e.format=t,e.display_type=\"contours\",o.generateChangeMap(e,\"exportLoading\",!1)}}),Et(_t(o),\"handleShowPreview\",function(){o.setState({previewLoading:!0});var t=o.getFormValues();t.epsg=4326,t.format=\"GeoJSON\",o.generateChangeMap(t,\"previewLoading\",!0)}),Et(_t(o),\"handleChangeOpacity\",function(t){var e=parseFloat(t.target.value)/100;o.setState({opacity:e}),o.state.previewLayer.setStyle({opacity:e}),o.props.map.closePopup()}),o.state={error:\"\",permanentError:\"\",epsg:h.getItem(\"last_changedetection_epsg\")||\"4326\",customEpsg:h.getItem(\"last_changedetection_custom_epsg\")||\"4326\",displayType:h.getItem(\"last_changedetection_display_type\")||\"contours\",resolution:h.getItem(\"last_changedetection_resolution\")||.2,minArea:h.getItem(\"last_changedetection_min_area\")||40,minHeight:h.getItem(\"last_changedetection_min_height\")||5,role:h.getItem(\"last_changedetection_role\")||\"reference\",align:!!o.props.alignSupported&&\"true\"===h.getItem(\"last_changedetection_align\"),other:\"\",otherTasksInProject:new Map,loading:!0,task:t.tasks[0]||null,previewLoading:!1,exportLoading:!1,previewLayer:null,opacity:100},o}return function(t,e,n){e&&yt(t.prototype,e),n&&yt(t,n)}(n,[{key:\"componentDidUpdate\",value:function(){var t=this;if(this.props.isShowed&&this.state.loading){var e=this.state.task,n=e.id,o=e.project;this.loadingReq=$.getJSON(\"/api/projects/\".concat(o,\"/tasks/\")).done(function(e){var o=new Map;if(t.props.alignSupported)e.filter(function(t){return t.id!==n}).forEach(function(t){var e=t.id,n=t.name;return o.set(e,n)});else{var r=e.filter(function(t){return t.id===n})[0].available_assets,i=[];if(-1===r.indexOf(\"dsm.tif\")&&i.push(\"No DSM is available. Make sure to process a task with either the --dsm option checked\"),-1===r.indexOf(\"dtm.tif\")&&i.push(\"No DTM is available. Make sure to process a task with either the --dtm option checked\"),i.length>0)return void t.setState({permanentError:i.join(\"\\n\")});var a=e.filter(function(t){return t.id!==n}).filter(function(t){var e=t.available_assets;return e.indexOf(\"dsm.tif\")>=0&&e.indexOf(\"dtm.tif\")>=0});if(0===a.length)return void t.setState({permanentError:\"Couldn't find other tasks on the project. Please make sure there are other tasks on the project that have both a DTM and DSM.\"});a.forEach(function(t){var e=t.id,n=t.name;return o.set(e,n)})}if(0===o.size)t.setState({permanentError:\"Couldn't find other tasks on this project. This plugin must be used on projects with 2 or more tasks.\"});else{var l=Array.from(o.entries())[0][0];t.setState({otherTasksInProject:o,other:l})}}).fail(function(){t.setState({permanentError:\"Cannot retrieve information for the current project. Are you are connected to the internet?\"})}).always(function(){t.setState({loading:!1}),t.loadingReq=null})}}},{key:\"componentWillUnmount\",value:function(){this.loadingReq&&(this.loadingReq.abort(),this.loadingReq=null),this.generateReq&&(this.generateReq.abort(),this.generateReq=null)}},{key:\"render\",value:function(){var t=this.state,e=t.loading,n=(t.task,t.otherTasksInProject),o=(t.error,t.permanentError),r=t.other,i=t.epsg,a=t.customEpsg,l=t.exportLoading,s=t.minHeight,c=t.minArea,p=t.displayType,u=t.resolution,d=t.previewLoading,h=t.previewLayer,m=t.opacity,b=t.role,y=t.align,g=\"custom\"===i&&!a||!r,v=\"\";return v=e?f.a.createElement(\"span\",null,f.a.createElement(\"i\",{className:\"fa fa-circle-notch fa-spin\"}),\" Loading...\"):o?f.a.createElement(\"div\",{className:\"alert alert-warning\"},o):f.a.createElement(\"div\",null,f.a.createElement(L,{bind:[this,\"error\"]}),f.a.createElement(\"div\",{className:\"row form-group form-inline\"},f.a.createElement(\"label\",{className:\"col-sm-3 control-label\"},\"Role:\"),f.a.createElement(\"div\",{className:\"col-sm-9 \"},f.a.createElement(\"select\",{className:\"form-control\",value:b,onChange:this.handleSelectRole},f.a.createElement(\"option\",{value:\"reference\"},\"Reference\"),f.a.createElement(\"option\",{value:\"compare\"},\"Compare\")),f.a.createElement(\"p\",{className:\"glyphicon glyphicon-info-sign help\",\"data-tip\":\"This plugin will take the reference task, and substract the compare task. Then, we will apply the filters<BR/>available below to determine if some difference is a valid change or not.\"}))),f.a.createElement(\"div\",{className:\"row form-group form-inline\"},f.a.createElement(\"label\",{className:\"col-sm-3 control-label\"},\"Other:\"),f.a.createElement(\"div\",{className:\"col-sm-9 \"},f.a.createElement(\"select\",{className:\"form-control\",value:r,onChange:this.handleSelectOther},Array.from(n.entries()).map(function(t){var e=mt(t,2),n=e[0],o=e[1];return f.a.createElement(\"option\",{value:n,title:o},o.length>20?o.substring(0,19)+\"...\":o)})),this.props.alignSupported?f.a.createElement(\"p\",{className:\"glyphicon glyphicon-info-sign help\",\"data-tip\":\"Select the other task on the project to compare this task against.\"}):f.a.createElement(\"p\",{className:\"glyphicon glyphicon-info-sign help\",\"data-tip\":\"Select the other task on the project to compare this task against.<BR/>Take into account that only tasks with both a DSM and DTM will be available here.\"}))),this.props.alignSupported?f.a.createElement(\"div\",{className:\"row form-group form-inline\"},f.a.createElement(\"label\",{className:\"col-sm-3 control-label\"},\"Align:\"),f.a.createElement(\"div\",{className:\"col-sm-9 \"},f.a.createElement(\"input\",{type:\"checkbox\",className:\"form-control\",checked:y,onChange:this.handleChangeAlign}),f.a.createElement(\"p\",{className:\"glyphicon glyphicon-info-sign help\",\"data-tip\":\"It is possible to align the two tasks to detect changes more accurately.<BR/>But take into account that the processing can take longer if you do so.\"}))):\"\",f.a.createElement(\"div\",{className:\"row form-group form-inline\"},f.a.createElement(\"label\",{className:\"col-sm-3 control-label\"},\"Display mode:\"),f.a.createElement(\"div\",{className:\"col-sm-9 \"},f.a.createElement(\"select\",{className:\"form-control\",value:p,onChange:this.handleSelectDisplayType},f.a.createElement(\"option\",{value:\"contours\"},\"Contours\"),f.a.createElement(\"option\",{value:\"heatmap\"},\"Heatmap\")),f.a.createElement(\"p\",{className:\"glyphicon glyphicon-info-sign help\",\"data-tip\":\"You can select to display a heatmap with all the substraction, or the contours of the filtered changes.<BR/>Export is only available for the 'Contours' mode.\"}))),f.a.createElement(\"div\",{className:\"row form-group form-inline\"},f.a.createElement(\"label\",{className:\"col-sm-3 control-label\"},\"Resolution:\"),f.a.createElement(\"div\",{className:\"col-sm-9 \"},f.a.createElement(\"input\",{type:\"number\",className:\"form-control custom-interval\",value:u,onChange:this.handleSelectResolution}),f.a.createElement(\"span\",null,\" meters/pixel\"),f.a.createElement(\"p\",{className:\"glyphicon glyphicon-info-sign help\",\"data-tip\":\"You can indicate the resolution to use when detecting changes. The final resolution used will be: max(input, resolution(reference), resolution(compare)).<BR/>The higher the resolution, the faster the result will be calculated. You can set to 0 to use the DEMs resolutions.\"}))),f.a.createElement(\"div\",{className:\"row form-group form-inline\"},f.a.createElement(\"label\",{className:\"col-sm-3 control-label\"},\"Min Height:\"),f.a.createElement(\"div\",{className:\"col-sm-9 \"},f.a.createElement(\"input\",{type:\"number\",className:\"form-control custom-interval\",value:s,onChange:this.handleSelectMinHeight}),f.a.createElement(\"span\",null,\" meters\"),f.a.createElement(\"p\",{className:\"glyphicon glyphicon-info-sign help\",\"data-tip\":\"When detecting change, there can be some noise. Please indicate the min height that change needs to have to consider it a valid change.\"}))),f.a.createElement(\"div\",{className:\"row form-group form-inline\"},f.a.createElement(\"label\",{className:\"col-sm-3 control-label\"},\"Min Area:\"),f.a.createElement(\"div\",{className:\"col-sm-9 \"},f.a.createElement(\"input\",{type:\"number\",disabled:\"heatmap\"===p,className:\"form-control custom-interval\",value:c,onChange:this.handleSelectMinArea}),f.a.createElement(\"span\",null,\" sq meters\"),f.a.createElement(\"p\",{className:\"glyphicon glyphicon-info-sign help\",\"data-tip\":\"When detecting change, there can be some noise. Please indicate the min area that change needs to have to consider it a valid change.<BR/>This option is only available with the 'Contours' display mode.\"}))),f.a.createElement(\"div\",{className:\"row form-group form-inline\"},f.a.createElement(\"label\",{className:\"col-sm-3 control-label\"},\"Projection:\"),f.a.createElement(\"div\",{className:\"col-sm-9 \"},f.a.createElement(\"select\",{className:\"form-control\",value:i,onChange:this.handleSelectEpsg},f.a.createElement(\"option\",{value:\"4326\"},\"WGS84 (EPSG:4326)\"),f.a.createElement(\"option\",{value:\"3857\"},\"Web Mercator (EPSG:3857)\"),f.a.createElement(\"option\",{value:\"custom\"},\"Custom EPSG\")))),\"custom\"===i?f.a.createElement(\"div\",{className:\"row form-group form-inline\"},f.a.createElement(\"label\",{className:\"col-sm-3 control-label\"},\"EPSG:\"),f.a.createElement(\"div\",{className:\"col-sm-9 \"},f.a.createElement(\"input\",{type:\"number\",className:\"form-control custom-interval\",value:a,onChange:this.handleChangeCustomEpsg}))):\"\",h?f.a.createElement(\"div\",{className:\"row form-group form-inline\"},f.a.createElement(\"label\",{className:\"col-sm-3 control-label\"},\"Opacity:\"),f.a.createElement(\"div\",{className:\"col-sm-9\"},f.a.createElement(\"input\",{type:\"range\",className:\"slider\",step:\"1\",value:100*m,onChange:this.handleChangeOpacity}),f.a.createElement(\"p\",{className:\"glyphicon glyphicon-info-sign help\",\"data-tip\":\"Control the opacity of the change map. You must generate a preview to be able to control the opacity.\"}),f.a.createElement(dt,{place:\"left\",effect:\"solid\",html:!0}))):\"\",f.a.createElement(\"div\",{className:\"row action-buttons\"},f.a.createElement(\"div\",{className:\"col-sm-9 text-right\"},f.a.createElement(\"button\",{onClick:this.handleShowPreview,disabled:g||d,type:\"button\",className:\"btn btn-sm btn-primary btn-preview\"},d?f.a.createElement(\"i\",{className:\"fa fa-spin fa-circle-notch\"}):f.a.createElement(\"i\",{className:\"glyphicon glyphicon-eye-open\"}),\" Preview\"),f.a.createElement(\"div\",{className:\"btn-group\"},f.a.createElement(\"button\",{disabled:g||l||\"heatmap\"===p,title:\"heatmap\"===p?\"Export is only available for the 'Contours' display mode\":\"\",type:\"button\",className:\"btn btn-sm btn-primary\",\"data-toggle\":\"dropdown\"},l?f.a.createElement(\"i\",{className:\"fa fa-spin fa-circle-notch\"}):f.a.createElement(\"i\",{className:\"glyphicon glyphicon-download\"}),\" Export\"),f.a.createElement(\"button\",{disabled:g||l||\"heatmap\"===p,title:\"heatmap\"===p?\"Export is only available for the 'Contours' display mode\":\"\",type:\"button\",className:\"btn btn-sm dropdown-toggle btn-primary\",\"data-toggle\":\"dropdown\"},f.a.createElement(\"span\",{className:\"caret\"})),f.a.createElement(\"ul\",{className:\"dropdown-menu  pull-right\"},f.a.createElement(\"li\",null,f.a.createElement(\"a\",{href:\"javascript:void(0);\",onClick:this.handleExport(\"GPKG\")},f.a.createElement(\"i\",{className:\"fa fa-globe fa-fw\"}),\" GeoPackage (.GPKG)\")),f.a.createElement(\"li\",null,f.a.createElement(\"a\",{href:\"javascript:void(0);\",onClick:this.handleExport(\"DXF\")},f.a.createElement(\"i\",{className:\"fa fa-file fa-fw\"}),\" AutoCAD (.DXF)\")),f.a.createElement(\"li\",null,f.a.createElement(\"a\",{href:\"javascript:void(0);\",onClick:this.handleExport(\"GeoJSON\")},f.a.createElement(\"i\",{className:\"fa fa-code fa-fw\"}),\" GeoJSON (.JSON)\")),f.a.createElement(\"li\",null,f.a.createElement(\"a\",{href:\"javascript:void(0);\",onClick:this.handleExport(\"ESRI Shapefile\")},f.a.createElement(\"i\",{className:\"fa fa-file-archive fa-fw\"}),\" ShapeFile (.SHP)\")))))),f.a.createElement(dt,{place:\"left\",effect:\"solid\",html:!0})),f.a.createElement(\"div\",{className:\"changedetection-panel\"},f.a.createElement(\"span\",{className:\"close-button\",onClick:this.props.onClose}),f.a.createElement(\"div\",{className:\"title\"},\"Change Detection\"),f.a.createElement(\"hr\",null),v)}}]),n}();function St(t){\"@babel/helpers - typeof\";return(St=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function xt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Tt(t,e){return(Tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kt(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=Ct(t);if(e){var r=Ct(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return function(t,e){if(e&&(\"object\"===St(e)||\"function\"==typeof e))return e;return Lt(t)}(this,n)}}function Lt(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}function Ct(t){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Et(Ot,\"defaultProps\",{}),Et(Ot,\"propTypes\",{onClose:p.a.func.isRequired,tasks:p.a.object.isRequired,isShowed:p.a.bool.isRequired,map:p.a.object.isRequired,alignSupported:p.a.bool.isRequired});var Rt=function(t){!function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tt(t,e)}(n,s.a.Component);var e=kt(n);function n(t){var o;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,n),Pt(Lt(o=e.call(this,t)),\"handleOpen\",function(){o.setState({showPanel:!0})}),Pt(Lt(o),\"handleClose\",function(){o.setState({showPanel:!1})}),o.state={showPanel:!1},o}return function(t,e,n){e&&xt(t.prototype,e),n&&xt(t,n)}(n,[{key:\"render\",value:function(){var t=this.state.showPanel;return s.a.createElement(\"div\",{className:t?\"open\":\"\"},s.a.createElement(\"a\",{href:\"javascript:void(0);\",onClick:this.handleOpen,className:\"leaflet-control-changedetection-button leaflet-bar-part theme-secondary\"}),s.a.createElement(Ot,{map:this.props.map,isShowed:t,alignSupported:this.props.alignSupported,tasks:this.props.tasks,onClose:this.handleClose}))}}]),n}();Pt(Rt,\"propTypes\",{tasks:p.a.object.isRequired,map:p.a.object.isRequired,alignSupported:p.a.bool.isRequired});e.default=r.a.Control.extend({options:{position:\"topright\"},onAdd:function(t){var e=r.a.DomUtil.create(\"div\",\"leaflet-control-changedetection leaflet-bar leaflet-control\");return r.a.DomEvent.disableClickPropagation(e),a.a.render(s.a.createElement(Rt,{map:this.options.map,alignSupported:this.options.alignSupported,tasks:this.options.tasks}),e),e}})},function(t,e){},,,function(t,e){}])});","extractedComments":[]}